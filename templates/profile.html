{% extends "base.html" %}

{% block title %}APEX | {{ user.first_name }} {{ user.last_name }}{% endblock %}

{% block content %}

<style>
    /* Professional Profile Styles */
    
    /* 1. جعل الخلفية بيضاء لتوحيد اللون */
    .main-section {
        background-color: #ffffff; /* أبيض موحد */
        min-height: 85vh;
        padding-top: 40px;
        padding-bottom: 100px; /* هنا زدت التيساع على قبل الفوتر */
    }

    .profile-card {
        border: 1px solid #e1e4e8; /* إطار خفيف جداً */
        border-radius: 20px;
        overflow: hidden;
        background-color: white;
        box-shadow: 0 10px 30px rgba(0,0,0,0.05); /* ظل خفيف وناعم */
    }

    .profile-banner {
        height: 180px;
        /* APEX Brand Colors Gradient */
        background: linear-gradient(135deg, #0d6efd 0%, #0099ff 100%); 
        width: 100%;
        position: relative;
    }

    .profile-header-container {
        position: relative;
        text-align: center;
        margin-top: -90px; /* طلعنا الصورة كثر باش تبان وسط البانر */
    }

    .profile-img-pro {
        width: 160px;
        height: 160px;
        border-radius: 50%;
        object-fit: cover;
        border: 6px solid #ffffff; /* حدود بيضاء عريضة */
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        background-color: white;
    }

    /* Badges */
    .role-badge {
        display: inline-block;
        padding: 6px 15px;
        border-radius: 50px;
        font-size: 0.8rem;
        font-weight: 700;
        letter-spacing: 0.5px;
        color: white;
        text-transform: uppercase;
        margin-top: 12px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    .team-it { background-color: #0366d6; }
    .team-media { background-color: #d73a49; }
    .team-hr { background-color: #6f42c1; }
    .team-logistics { background-color: #28a745; }
    .team-president { background-color: #ffd33d; color: #000; }
    .normal-user { background-color: #6c757d; }

    /* Info Items */
    .info-box {
        background-color: #f8f9fa; /* رمادي خفيف جداً فقط داخل المعلومات */
        padding: 15px;
        border-radius: 12px;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        transition: all 0.3s ease;
        border: 1px solid transparent;
    }
    
    .info-box:hover {
        background-color: #fff;
        border-color: #0d6efd;
        box-shadow: 0 5px 15px rgba(13, 110, 253, 0.1);
        transform: translateY(-2px);
    }

    .info-box i {
        font-size: 1.4rem;
        color: #0d6efd;
        margin-right: 15px;
        width: 30px;
        text-align: center;
    }

    .edit-btn-top {
        position: absolute;
        top: 20px;
        right: 20px;
        background: rgba(255,255,255,0.2);
        color: white;
        border: 1px solid rgba(255,255,255,0.5);
        padding: 8px 20px;
        border-radius: 30px;
        backdrop-filter: blur(5px);
        text-decoration: none;
        font-weight: 500;
        transition: 0.3s;
    }
    .edit-btn-top:hover {
        background: white;
        color: #0d6efd;
    }
</style>

<section class="main-section">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-10 col-xl-9">
                
                <div class="card profile-card">
                    <div class="profile-banner">
                        <a href="#" class="edit-btn-top">
                            <i class="fas fa-cog me-2"></i> Settings
                        </a>
                    </div>

                    <div class="card-body p-4 p-md-5">
                        <div class="profile-header-container mb-5">
                            <img src="{{ url_for('static', filename='uploads/profiles/' + user.profile_image) }}" 
                                class="profile-img-pro" alt="Profile">
                            
                            <h2 class="mt-3 fw-bold text-dark">{{ user.first_name }} {{ user.last_name }}</h2>
                            
                            {% if user.team %}
                                <span class="role-badge team-{{ user.team|lower }}">
                                    {{ user.role }} | {{ user.team }}
                                </span>
                            {% else %}
                                <span class="role-badge normal-user">
                                    Member
                                </span>
                            {% endif %}
                        </div>

                        <div class="row g-5">
                            <div class="col-md-7">
                                <h5 class="fw-bold mb-4 text-primary">
                                    <i class="fas fa-user me-2"></i>About Me
                                </h5>
                                <div class="p-4 rounded-3 h-100" style="background-color: #f8f9fa; border-left: 5px solid #0d6efd;">
                                    <p class="mb-0 text-secondary" style="line-height: 1.8; font-size: 1.05rem;">
                                        {% if user.bio %}
                                            {{ user.bio }}
                                        {% else %}
                                            <em class="text-muted">No bio added yet. Click "Edit Profile" to introduce yourself!</em>
                                        {% endif %}
                                    </p>
                                </div>
                            </div>

                            <div class="col-md-5">
                                <h5 class="fw-bold mb-4 text-primary">
                                    <i class="fas fa-address-card me-2"></i>Details
                                </h5>
                                
                                <div class="info-box">
                                    <i class="fas fa-envelope"></i> 
                                    <div style="overflow: hidden;">
                                        <small class="text-muted d-block">Email</small>
                                        <span class="fw-bold text-dark text-break">{{ user.email }}</span>
                                    </div>
                                </div>

                                <div class="info-box">
                                    <i class="fas fa-phone"></i> 
                                    <div>
                                        <small class="text-muted d-block">Phone</small>
                                        <span class="text-dark fw-bold">{{ user.phone_number }}</span>
                                    </div>
                                </div>
                                
                                <div class="info-box">
                                    <i class="fas fa-signal"></i>
                                    <div>
                                        <small class="text-muted d-block">Status</small>
                                        <span class="text-success fw-bold">Active</span>
                                    </div>
                                </div>
                            </div>
                        </div> 

                        <hr class="my-5">

                        <div class="text-center">
                            <a href="{{ url_for('edit_profile') }}"class="btn btn-primary px-5 py-3 rounded-pill shadow fw-bold">
                                <i class="fas fa-pen-to-square me-2"></i> Edit My Profile
                            </a>
                        </div>

                    </div>
                </div>

            </div>
        </div>
    </div>
</section>
{% endblock %}